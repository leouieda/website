{# Utility functions for the templates #}


{% macro fa(name, class='', title='') %}
    <i class="fa fa-{{ name }} {{ class }}" title="{{ title }}"></i>
{% endmacro %}


{% macro ai(name, class='', title='') %}
    <i class="ai ai-{{ name }} {{ class }}" title="{{ title }}"></i>
{% endmacro %}


{% macro card(page, date=true, show_oa=false, inprogress=false) %}
<a href="{{ page.url }}">
    <div class="card">
        {% if page.thumbnail is defined %}
            <img src="/images/thumb/{{page.thumbnail}}">
        {%  endif %}
        <div class="card-caption">
            {% if show_oa and page.oa is defined and page.oa %}
                {{ ai("open-access") }}
            {% endif %}
            <span class="card-title">
                {{ page.title }}
            </span>
            {% if date %}
                ({{ page.date.year }})
            {% endif %}
            </br>
            {% if inprogress and page.inprogress is defined and page.inprogress %}
                <span class="label label-primary">IN PROGRESS</span>
            {% endif %}
            {% if page.inreview is defined and page.inreview %}
                <span class="label label-warning">UNDER REVIEW</span>
            {% endif %}
            {% if page.accepted is defined and page.accepted %}
                <span class="label label-primary">ACCEPTED</span>
            {% endif %}
        </div>
    </div></a>
{% endmacro %}


{% macro get_authors(article, site) %}
    {% for author in article.author.split(', ') %}
        {% if author == site.author %}
            {% set author_name = "<strong>" + site.authors[author] + "</strong>" %}
        {% else %}
            {% set author_name = site.authors[author] %}
        {% endif %}
        {{ author_name }}{% if not loop.last %}, {% endif %}
    {% endfor %}
{% endmacro %}


{% macro pub_alerts(article, fancy=true) %}
    {% if article.inreview is defined and article.inreview %}
        {% if fancy %}
            <div class="alert alert-warning">
        {% else %}
            <p>
        {% endif %}
            This article is unpublished and is currently
            <strong>undergoing peer-review</strong>.
        {% if fancy %}
            </div>
        {% else %}
            </p>
        {% endif %}
    {% endif %}

    {% if article.accepted is defined and article.accepted %}
        {% if fancy %}
            <div class="alert alert-info alert-blue">
        {% else %}
            <p>
        {% endif %}
            This article has been <strong>accepted</strong> for publication
            {% if article.journal is defined %}
                in {{article.journal}}
            {% endif %}
            but has not yet been published.
        {% if fancy %}
            </div>
        {% else %}
            </p>
        {% endif %}
    {% endif %}

    {% if article.inprogress is defined and article.inprogress %}
        {% if fancy %}
            <div class="alert alert-info alert-blue">
            {{ fa("refresh", "fa-fw", "Course in progress") }}
        {% else %}
            <p>
        {% endif %}
            This course is currently <strong>in progress</strong>
            for the {{article.date.year}} school year.
        {% if fancy %}
            </div>
        {% else %}
            </p>
        {% endif %}
    {% endif %}
{% endmacro %}
