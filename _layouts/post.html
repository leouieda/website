{% extends "publication.html" %}
{% from "utils.html" import feedback, insert_thumbnail, make_tags, fa, make_side_index, pub_info_icon %}


{% block content %}

    <div class="row">
        <div class="col-md-9">

            <h1>{{ this.title }}</h1>

            <ul class="fa-ul">
                <li class="post-date">
                    {{ pub_info_icon("fa fa-calendar", "date") }}
                    {{ this.date.strftime(' %d %B %Y') }}
                </li>
                {% if this.tags is defined %}
                    <li>
                        {{ pub_info_icon("fa fa-tags", "tags") }}
                        {{ make_tags(this.tags) }}
                    </li>
                {% endif %}
            </ul>

            <div class="content">
                {{ this.body }}
            </div>

            {{ feedback(this, site, fancy=true) }}

        </div>

        <div class="col-md-1">
        </div>

        <div class="col-md-2 sidebar">
            <h2>Blog</h2>
            {% set posts = site.reflinks['/blog'].content|sort(attribute='date', reverse=true) %}
            {{ make_side_index(posts, site, date=true, year_only=false, ncards=3) }}

            {% set pages = this|related(site)|sort(attribute='date', reverse=true) %}
            {% if pages %}
                <h2>Related</h2>
                {{ make_side_index(pages, site, date=true, year_only=true, ncards=3) }}
            {% endif %}
        </div>
    </div>

{% endblock %}
